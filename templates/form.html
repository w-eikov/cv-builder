<!DOCTYPE html>
<html>
<head>
<title>Details</title>
</head>

<body>
    <!-- Preview Form -->
    <form method="POST" action="/preview-cv" target="_blank">
        <label>Name:</label>
        <input type="text" name="name" required><br>

        <label>Email:</label>
        <input type="email" name="email" required><br>

        <label>Phone Number:</label>
        <input type="text" name="phone" required><br>

        <label>Skills (comma-separated):</label>
        <input type="text" name="skills"><br>

        <label>Experience 1:</label>
        <textarea name="experience" rows="10" placeholder="Company name, goals achieved, etc..."></textarea><br>

        <label>Experience 2:</label>
        <textarea name="experience" rows="10" placeholder="Company name, goals achieved, etc..."></textarea><br>

        <label>Experience 3:</label>
        <textarea name="experience" rows="10" placeholder="Company name, goals achieved, etc..."></textarea><br>

        <label>Interests:</label>
        <textarea name="interests" rows="4" placeholder="Keep brief - 1 or 2 lines"></textarea><br>
        
        <label>Goals (comma-separated):</label>
        <input type="text" name="goals"><br>

        <button type="submit">Preview CV</button>
    </form>

    <br>

    <!-- Download Form -->
    <form method="POST" action="/download-cv">
        <!-- hidden fields will be populated via JavaScript before submitting -->
        <input type="hidden" name="name" id="name">
        <input type="hidden" name="email" id="email">
        <input type="hidden" name="phone" id="phone">
        <input type="hidden" name="skills" id="skills">
        <input type="hidden" name="experience" id="experience">
        <input type="hidden" name="interests" id="interests">
        <input type="hidden" name="goals" id="goals">

        <button type="submit" onclick="populateDownloadFields()">Download PDF</button>
    </form>

    <script>
        function populateDownloadFields() {
            // Copy values from input fields in the first form to hidden fields in the download form
            document.getElementById('name').value = document.querySelector('input[name="name"]').value;
            document.getElementById('email').value = document.querySelector('input[name="email"]').value;
            document.getElementById('phone').value = document.querySelector('input[name="phone"]').value;
            document.getElementById('skills').value = document.querySelector('input[name="skills"]').value;
            
            // Combine multiple experience fields into one string, separated by newlines
            const experiences = Array.from(document.querySelectorAll('textarea[name="experience"]')).map(t => t.value).join("\n\n");
            document.getElementById('experience').value = experiences;

            document.getElementById('interests').value = document.querySelector('textarea[name="interests"]').value;
            document.getElementById('goals').value = document.querySelector('input[name="goals"]').value;
        }
    </script>
</body>
</html>
